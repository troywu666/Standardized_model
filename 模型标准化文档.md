[TOC]

# 模型标准化

## 数据输入输出

***data_io.py***

### 配置数据库登录信息

- 先在config.ini配置文件上将数据库的登录信息配置完成，示例如下：

  ```
  [server]
  user = dbc
  password = pass
  host = 192.168.253.231
  port = 22
  dbname = server1
  ```

- 将配置文件的地址传入data_io.database类并实例化后可实现数据输入输出

  > path：配置文件的地址，参数类型为string

  ```python
  from data_io import database
  path = r'D:\troywu666\business_stuff\民生对公项目\模型标准化\config.ini'
  database = Database(path)
  ```

  

### 数据读取

- 在使用Database(path).read_data函数时输入sql语句和数据库类型可实现数据读取

  > sql：所使用的sql查询语句，参数类型为string
  >
  > server：数据库类型，可选的有“teradata”和“mysql”两种，参数类型为string

  ```python
  sql = 'SELECT empmo, ename, mgr FROM emp'
  database.read_data(sql = sql, server = 'teradata')
  ```

  

### 数据导入

- 在使用Database(path).data_to_sql函数时传入数据和数据库类型可实现数据读取

  > data：需要储存到数据库的数据，类型为pandas.DataFrame
  >
  > server：数据库类型，可选的有“teradata”和“mysql”两种

  ```python
  #data必须为pandas.DataFrame
  database.data_to_sql(data = data, server = 'teradata')
  ```



## 数据探索

***data_exploring.py***

### 实例化

- 传入需要探索的数据进行实例化

  > data：需要探索的数据，类型为pandas.DataFrame

  ```python
  from data_exploring imoprt Explore
  explore = Explore(data)
  ```

  

### 输出数值型数据的统计信息

- 统计数据的'0%', '12.5%', '25%', '37.5%', '50%', '62.5%', '75%', '87.5%', '95%', '99%', '100%'分位数、数据个数、偏度、峰度、平均值、标准差、空值个数、空值比例

  ```python
  explore.describe_num()
  ```

  

### 输出非数值型数据的统计信息

- 统计数据的非空值个数、出现频率最高的数据、出现频率最高的数据、唯一值个数、空值个数、空值比例

  ```
  explore.describe_obj()
  ```

  

### 输出变量相关性热力图

> figsize：设定图像的大小，参数类型为元组

```python
explore.corr_and_plot(figsize = (32, 18))
```

### 输出各变量的分布图

```python
explore.distplot()
```

### 输出变量关系图

- 该图展现变量两两之间的关系（线性或非线性，有无较明显的相关关系）

  >vars：想要研究的变量，数据类型为列表
  >
  >hue：使用指定变量为分类变量画图，数据类型是string

  ```python
  explore.pairplot(vars = df.columns[: -1], hue = 'age')
  ```

  

## 数据预处理

***preprocessing.py***

### 实例化

- 传入需要处理的数据进行实例化

  > data：需要处理的数据，类型为pandas.DataFrame

  ```python
  from preprocessing imoprt Transformer
  process = Transformer(data)
  ```



### 数据无量纲化

> method：有“min_max”和”standard“两种取值，”min_max“为归一化， ”standard“为标准化
>
> **返回结果**：同时返回**已训练好的数据转化器（方便后续储存及对测试集数据进行转化）**和已无量纲化的训练数据

```python
transformer, tranformed_data = process.scaler(method = 'min_max')
```



### 空值填充

- 可通过设定按不同策略进行填充，如均值、中位数、众数和设定值

  > strategy：可选'mean', 'median', 'most_frequent', 'constant'
  >
  > fill_value：当strategy选为'constant'时，fill_value需要额外设定，默认值是None
  >
  > **返回结果**：同时返回**已训练好的数据转化器（方便后续储存及对测试集数据进行转化）**和已填充空值的训练数据

  ```python
  strategy = 'constant'
  fill_value = 9
  transformer, tranformed_data = process.fillna(strategy = strategy, 
                                                fill_value = fill_value)
  ```

  

### 数据编码

- 可将分类型和连续型数据进行编码

  > method：有“onehot”、“ordinal”和“binarizer”三种可填方式，参数类型为string
  >
  > > “onehot”使用于无顺序之分的分类变量进行编码
  > >
  > > “ordinal”使用于有顺序之分的分类变量进行编码
  > >
  > > “binarizer”使用于将连续型变量进行二值化
  >
  > threshold：当method选为“binarizer”时，threshold为二值化的阈值。
  >
  > ​                     默认值为None，参数类型为float
  >
  > **返回结果**：同时返回**已训练好的数据转化器（方便后续储存及对测试集数据进行转化）**和已填充空值的训练数据

  ```python
  method= 'binarizer'
  threshold = 3
  transformer, tranformed_data = process.encoder(method = method)
  ```



### 对数化处理

```
tranformed_data = process.log()
```



## 特征选择

***feature_selection.py***

